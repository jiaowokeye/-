{"remainingRequest":"/Users/zxk/Applications/WeCodeIDE.app/Contents/Resources/app/extensions/wecode.wecode/resources/sdk/node_modules.asar/babel-loader/lib/index.js??ref--5-1!/Users/zxk/Applications/WeCodeIDE.app/Contents/Resources/app/extensions/wecode.wecode/resources/sdk/node_modules.asar/cache-loader/dist/cjs.js??ref--4-0!/Users/zxk/Applications/WeCodeIDE.app/Contents/Resources/app/extensions/wecode-eslint-config/node_modules/eslint-loader/dist/cjs.js??ref--4-1!/Users/zxk/Desktop/22/src/App.js","dependencies":[{"path":"/Users/zxk/Desktop/22/src/App.js","mtime":1591671473203},{"path":"/Users/zxk/Applications/WeCodeIDE.app/Contents/Resources/app/extensions/wecode.wecode/resources/sdk/node_modules.asar/cache-loader/dist/cjs.js","mtime":1591671475274},{"path":"/Users/zxk/Applications/WeCodeIDE.app/Contents/Resources/app/extensions/wecode.wecode/resources/sdk/node_modules.asar/babel-loader/lib/index.js","mtime":1591671475274},{"path":"/Users/zxk/Applications/WeCodeIDE.app/Contents/Resources/app/extensions/wecode.wecode/resources/sdk/node_modules.asar/cache-loader/dist/cjs.js","mtime":1591671475274},{"path":"/Users/zxk/Applications/WeCodeIDE.app/Contents/Resources/app/extensions/wecode-eslint-config/node_modules/eslint-loader/dist/cjs.js","mtime":1585646722000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7IHJldHVybiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7IH0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UiKTsgfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgeyB2YXIgX2FyciA9IFtdOyB2YXIgX24gPSB0cnVlOyB2YXIgX2QgPSBmYWxzZTsgdmFyIF9lID0gdW5kZWZpbmVkOyB0cnkgeyBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7IF9hcnIucHVzaChfcy52YWx1ZSk7IGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsgfSB9IGNhdGNoIChlcnIpIHsgX2QgPSB0cnVlOyBfZSA9IGVycjsgfSBmaW5hbGx5IHsgdHJ5IHsgaWYgKCFfbiAmJiBfaVsicmV0dXJuIl0gIT0gbnVsbCkgX2lbInJldHVybiJdKCk7IH0gZmluYWxseSB7IGlmIChfZCkgdGhyb3cgX2U7IH0gfSByZXR1cm4gX2FycjsgfQoKZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyOyB9CgovLyDor7fli7/kv67mlLnmraTmlofku7YKaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCwgdXNlUmVkdWNlciwgdXNlU3RhdGUgfSBmcm9tICJyZWFjdCI7CmltcG9ydCBjcmVhdGVIaXN0b3J5IGZyb20gImhpc3RvcnkvY3JlYXRlSGFzaEhpc3RvcnkiOwppbXBvcnQgcmVkdWNlciwgeyBpbml0aWFsU3RhdGUgfSBmcm9tICcuL3JlZHVjZXJzL2dsb2JhbCc7Ci8qCiDlhajlsYDlr7zlhaVsZXNzCiAqLwoKaW1wb3J0ICIuL2FwcC5jc3MiOwppbXBvcnQgJ2FudGQtbW9iaWxlL2Rpc3QvYW50ZC1tb2JpbGUuY3NzJzsgLy8gb3IgJ2FudGQtbW9iaWxlL2Rpc3QvYW50ZC1tb2JpbGUubGVzcycKCmltcG9ydCB7IGdldFVzZXJEYXRhLCBHTE9CQUxfVVNFUl9EQVRBIH0gZnJvbSAiLi9hY3Rpb25zL2dsb2JhbCI7CmltcG9ydCByb3V0ZXMgZnJvbSAiLi9yb3V0ZXMiOwppbXBvcnQgQXBwQ29udGV4dCBmcm9tICcuL0FwcENvbnRleHQnOwppbXBvcnQgUmVxdWVzdCBmcm9tICcuL3V0aWxzL3JlcXVlc3QnOwppbXBvcnQgeyB2ZXJpZnkgfSBmcm9tICcuL3NlcnZlcnMvaW5kZXgnOwoKdmFyIF9yZXF1aXJlID0gcmVxdWlyZSgicmVhY3Qtcm91dGVyLWRvbSIpLAogICAgUm91dGUgPSBfcmVxdWlyZS5Sb3V0ZSwKICAgIFJvdXRlciA9IF9yZXF1aXJlLlJvdXRlcjsKCnZhciBoaXN0b3J5ID0gY3JlYXRlSGlzdG9yeSgpOwpleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBBcHAoKSB7CiAgdmFyIF91c2VSZWR1Y2VyID0gdXNlUmVkdWNlcihyZWR1Y2VyLCBpbml0aWFsU3RhdGUpLAogICAgICBfdXNlUmVkdWNlcjIgPSBfc2xpY2VkVG9BcnJheShfdXNlUmVkdWNlciwgMiksCiAgICAgIHN0YXRlID0gX3VzZVJlZHVjZXIyWzBdLAogICAgICBkaXNwYXRjaCA9IF91c2VSZWR1Y2VyMlsxXTsKCiAgdmFyIF91c2VTdGF0ZSA9IHVzZVN0YXRlKGZhbHNlKSwKICAgICAgX3VzZVN0YXRlMiA9IF9zbGljZWRUb0FycmF5KF91c2VTdGF0ZSwgMiksCiAgICAgIGlzSGFzVG9rZW4gPSBfdXNlU3RhdGUyWzBdLAogICAgICBzZXRIYXNUb2tlbiA9IF91c2VTdGF0ZTJbMV07CgogIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7CiAgICBIV0g1LmNsZWFyU3RvcmFnZSgpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHt9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgY29uc29sZS5sb2coJ+a4heeQhuacrOWcsEg157yT5a2YICAgICcsIGVycm9yKTsKICAgIH0pOwogICAgSFdINS5zaG93TG9hZGluZygpOwogICAgSFdINS5nZXRBdXRoQ29kZSgpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgLy8g6I635Y+WdG9rZW4KICAgICAgUmVxdWVzdCgnd2VsaW5rLmRvP2dldFRva2VuJywgewogICAgICAgIGNvZGU6IGRhdGEuY29kZQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAvLyDnvJPlrZh0b2tlbgogICAgICAgIEhXSDUuc2V0U3RvcmFnZSh7CiAgICAgICAgICBrZXk6ICd0b2tlbicsCiAgICAgICAgICBkYXRhOiByZXMuZGF0YSwKICAgICAgICAgIGlzb2xhdGlvbjogMQogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgY29uc29sZS5sb2coJ+iuvue9rue8k+WtmOW8guW4uCcsIGVycm9yKTsKICAgICAgICB9KTsgLy8g57yT5a2YIHRva2Vu6L+H5pyf5pe26Ze0CiAgICAgICAgLy8gSFdINS5zZXRTdG9yYWdlKHsKICAgICAgICAvLyAgIGtleTogJ3Rva2VuRXhwaXJhdGlvbicsCiAgICAgICAgLy8gICBkYXRhOiBuZXcgRGF0ZSgpLmdldFRpbWUoKSwKICAgICAgICAvLyAgIGlzb2xhdGlvbjogMQogICAgICAgIC8vIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICAvLyAgIGNvbnNvbGUubG9nKCforr7nva7nvJPlrZjlvILluLgnLCBlcnJvcik7CiAgICAgICAgLy8gfSkKICAgICAgICAvLyDljY7kuLrnmoQg5Yig6Zmk57yT5a2Y5pa55rOV5pyJ6Zeu6aKYIOWFiOeUqHdpbmRvdyDlj5jph4/kv53lrZgKCiAgICAgICAgd2luZG93LnRva2VuRXhwaXJhdGlvbiA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwogICAgICAgIHdpbmRvdy50b2tlbiA9IHJlcy5kYXRhOwogICAgICAgIEhXSDUuaGlkZUxvYWRpbmcoKTsKICAgICAgICB2ZXJpZnkoe30pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgSFdINS5zZXRTdG9yYWdlKHsKICAgICAgICAgICAga2V5OiAndXNlcklkJywKICAgICAgICAgICAgZGF0YTogcmVzLmRhdGEudXNlcl9pZCwKICAgICAgICAgICAgaXNvbGF0aW9uOiAxCiAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coJ+iuvue9rue8k+WtmOW8guW4uCcsIGVycm9yKTsKICAgICAgICAgIH0pOwogICAgICAgICAgc2V0SGFzVG9rZW4odHJ1ZSk7CiAgICAgICAgICBIV0g1LmhpZGVMb2FkaW5nKCk7CiAgICAgICAgfSk7CiAgICAgICAgUmVxdWVzdCgnY29tcC91c2VyLmRvP3BhcmFtJywge30pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgSFdINS5zZXRTdG9yYWdlKHsKICAgICAgICAgICAga2V5OiAnaGVhZFBob3RvUGF0aCcsCiAgICAgICAgICAgIGRhdGE6IHJlcy5kYXRhLmhlYWRfcGhvdG9fcGF0aCwKICAgICAgICAgICAgaXNvbGF0aW9uOiAxCiAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coJ+iuvue9rue8k+WtmOW8guW4uCcsIGVycm9yKTsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0pOwogICAgdmFyIGlnbm9yZSA9IGZhbHNlOyAvLyDljZXpobXpnaLkuIDlvIDlp4vvvIzlj6/lnKjov5nph4zmt7vliqDlhajlsYDkv6Hmga/vvIzlpoLnlKjmiLfnrYnnrYnjgIIKCiAgICBnZXRVc2VyRGF0YSgpLnRoZW4oZnVuY3Rpb24gKHBheWxvYWQpIHsKICAgICAgaWYgKCFpZ25vcmUpIHsKICAgICAgICBkaXNwYXRjaCh7CiAgICAgICAgICB0eXBlOiBHTE9CQUxfVVNFUl9EQVRBLAogICAgICAgICAgcGF5bG9hZDogcGF5bG9hZAogICAgICAgIH0pOwogICAgICB9CiAgICB9KTsgLy8gY29uc29sZS5sb2coIuebkeWQrOmhtemdoui/lOWbnuS6i+S7tiIpOwoKICAgIHZhciBiYWNrRnVuY3Rpb24gPSBmdW5jdGlvbiBiYWNrRnVuY3Rpb24oKSB7CiAgICAgIC8vIOebkeWQrOmhtemdoui/lOWbnuS6i+S7tu+8jHJldHVybiB0cnVl55u05o6l6L+U5Zue77yMcmV0dXJuIGZhbHNl77yM5ouS57ud6L+U5Zue44CC5Y+q5pSv5oyB5a6J5Y2TCiAgICAgIHZhciBmbGFnID0gdHJ1ZTsKICAgICAgcmV0dXJuIGZsYWc7CiAgICB9OwoKICAgIHdpbmRvdy5IV0g1LmFkZEV2ZW50TGlzdGVuZXIoewogICAgICB0eXBlOiAiYmFjayIsCiAgICAgIGZ1bmM6IGJhY2tGdW5jdGlvbgogICAgfSk7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAvLyDnu4Tku7bplIDmr4Hkuovku7YKICAgICAgaWdub3JlID0gdHJ1ZTsKICAgICAgd2luZG93LkhXSDUucmVtb3ZlRXZlbnRMaXN0ZW5lcih7CiAgICAgICAgdHlwZTogJ2JhY2snLAogICAgICAgIGZ1bmM6IGJhY2tGdW5jdGlvbgogICAgICB9KTsKICAgIH07CiAgfSwgW10pOyAvLyDnrYnlvoXlhajlsYBzdGF0dXPlpITnkIblpb3vvIzlho3muLLmn5PjgILvvIjlj6/moLnmja7pnIDopoHkv67lpI3vvIkKCiAgaWYgKHN0YXRlLnVzZXJJbmZvID09PSBudWxsKSB7CiAgICByZXR1cm4gbnVsbDsKICB9CgogIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KEFwcENvbnRleHQuUHJvdmlkZXIsIHsKICAgIHZhbHVlOiBbc3RhdGUsIGRpc3BhdGNoXQogIH0sIGlzSGFzVG9rZW4gPyBSZWFjdC5jcmVhdGVFbGVtZW50KFJvdXRlciwgewogICAgaGlzdG9yeTogaGlzdG9yeQogIH0sIFJlYWN0LmNyZWF0ZUVsZW1lbnQoUm91dGUsIHsKICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkgewogICAgICByZXR1cm4gcm91dGVzLm1hcChmdW5jdGlvbiAocm91dGUpIHsKICAgICAgICB2YXIgcGF0aCA9IHJvdXRlLnBhdGgsCiAgICAgICAgICAgIGxvY2F0aW9uID0gcm91dGUubG9jYXRpb24sCiAgICAgICAgICAgIF9yb3V0ZSRleGFjdCA9IHJvdXRlLmV4YWN0LAogICAgICAgICAgICBleGFjdCA9IF9yb3V0ZSRleGFjdCA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9yb3V0ZSRleGFjdCwKICAgICAgICAgICAgQyA9IHJvdXRlLmNvbXBvbmVudDsKICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChSb3V0ZSwgewogICAgICAgICAga2V5OiBwYXRoLAogICAgICAgICAgbG9jYXRpb246IGxvY2F0aW9uLAogICAgICAgICAgcGF0aDogcGF0aCwKICAgICAgICAgIGV4YWN0OiBleGFjdCwKICAgICAgICAgIGNvbXBvbmVudDogQwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9KSkgOiBSZWFjdC5jcmVhdGVFbGVtZW50KCJzcGFuIiwgbnVsbCkpOwp9"},{"version":3,"sources":["/Users/zxk/Desktop/22/src/App.js"],"names":["React","useEffect","useReducer","useState","createHistory","reducer","initialState","getUserData","GLOBAL_USER_DATA","routes","AppContext","Request","verify","require","Route","Router","history","App","state","dispatch","isHasToken","setHasToken","HWH5","clearStorage","then","data","catch","error","console","log","showLoading","getAuthCode","code","res","setStorage","key","isolation","window","tokenExpiration","Date","getTime","token","hideLoading","user_id","head_photo_path","ignore","payload","type","backFunction","flag","addEventListener","func","removeEventListener","userInfo","map","route","path","location","exact","C","component"],"mappings":"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","sourcesContent":["// 请勿修改此文件\nimport React, { useEffect, useReducer, useState } from \"react\";\nimport createHistory from \"history/createHashHistory\";\nimport reducer, { initialState } from './reducers/global';\n/*\n 全局导入less\n */\nimport \"./app.css\";\nimport 'antd-mobile/dist/antd-mobile.css';  // or 'antd-mobile/dist/antd-mobile.less'\nimport { getUserData, GLOBAL_USER_DATA } from \"./actions/global\";\nimport routes from \"./routes\";\nimport AppContext from './AppContext';\nimport Request from './utils/request'\nimport {verify} from './servers/index'\nconst { Route, Router } = require(\"react-router-dom\");\nconst history = createHistory();\n\n\nexport default function App() {\n  const [state, dispatch] = useReducer(reducer, initialState);\n  const [isHasToken,setHasToken] = useState(false);\n  \n  useEffect(() => {\n    HWH5.clearStorage().then((data) => {\n      \n    }).catch((error) => {\n      console.log('清理本地H5缓存    ', error);\n    });\n    HWH5.showLoading();\n    HWH5.getAuthCode().then(data => {\n      // 获取token\n      Request('welink.do?getToken', {\n        code: data.code\n      }).then((res) => {\n        // 缓存token\n        HWH5.setStorage({\n          key: 'token',\n          data: res.data,\n          isolation: 1\n        }).catch(error => {\n          console.log('设置缓存异常', error);\n        })\n        // 缓存 token过期时间\n        // HWH5.setStorage({\n        //   key: 'tokenExpiration',\n        //   data: new Date().getTime(),\n        //   isolation: 1\n        // }).catch(error => {\n        //   console.log('设置缓存异常', error);\n        // })\n        // 华为的 删除缓存方法有问题 先用window 变量保存\n        window.tokenExpiration = new Date().getTime();\n        window.token = res.data;\n        HWH5.hideLoading();\n        verify({}).then((res)=>{\n          HWH5.setStorage({\n            key: 'userId',\n            data: res.data.user_id,\n            isolation: 1\n          }).catch(error => {\n            console.log('设置缓存异常', error);\n          })\n          setHasToken(true);\n          HWH5.hideLoading();\n        });\n        Request('comp/user.do?param', {\n        }).then((res) => {\n          HWH5.setStorage({\n            key: 'headPhotoPath',\n            data: res.data.head_photo_path,\n            isolation: 1\n          }).catch(error => {\n            console.log('设置缓存异常', error);\n          })\n        });\n      });\n    })\n    let ignore = false;\n    // 单页面一开始，可在这里添加全局信息，如用户等等。\n    getUserData().then((payload)=> {\n      if (!ignore) {\n        dispatch({ type: GLOBAL_USER_DATA, payload});\n      }\n    });\n\n    // console.log(\"监听页面返回事件\");\n    const backFunction = () => {\n      // 监听页面返回事件，return true直接返回，return false，拒绝返回。只支持安卓\n      const flag = true;\n      return flag;\n    }\n    window.HWH5.addEventListener({\n      type: \"back\",\n      func: backFunction\n    });\n\n    return ()=> {\n      // 组件销毁事件\n      ignore = true;\n      window.HWH5.removeEventListener({ type: 'back', func: backFunction });\n    };\n  }, []);\n  // 等待全局status处理好，再渲染。（可根据需要修复）\n  if (state.userInfo === null) {\n    return null;\n  }\n  return (\n    <AppContext.Provider value={[state, dispatch]}>\n      {\n        isHasToken?<Router history={history}>\n        <Route\n          render={() =>\n            routes.map(route => {\n              const { path, location, exact = true, component: C } = route;\n              return (\n                <Route\n                  key={path}\n                  location={location}\n                  path={path}\n                  exact={exact}\n                  component={C}\n                />\n              );\n            })\n          }\n        />\n      </Router>:<span></span>\n      }\n      \n    </AppContext.Provider>\n  );\n}\n"]}]}