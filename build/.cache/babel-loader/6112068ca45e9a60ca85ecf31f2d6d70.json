{"remainingRequest":"/Users/zxk/Applications/WeCodeIDE.app/Contents/Resources/app/extensions/wecode.wecode/resources/sdk/node_modules.asar/babel-loader/lib/index.js??ref--5-1!/Users/zxk/Applications/WeCodeIDE.app/Contents/Resources/app/extensions/wecode.wecode/resources/sdk/node_modules.asar/cache-loader/dist/cjs.js??ref--4-0!/Users/zxk/Applications/WeCodeIDE.app/Contents/Resources/app/extensions/wecode-eslint-config/node_modules/eslint-loader/dist/cjs.js??ref--4-1!/Users/zxk/Desktop/22/src/utils/request.js","dependencies":[{"path":"/Users/zxk/Desktop/22/src/utils/request.js","mtime":1591668905211},{"path":"/Users/zxk/Applications/WeCodeIDE.app/Contents/Resources/app/extensions/wecode.wecode/resources/sdk/node_modules.asar/cache-loader/dist/cjs.js","mtime":1591671475274},{"path":"/Users/zxk/Applications/WeCodeIDE.app/Contents/Resources/app/extensions/wecode.wecode/resources/sdk/node_modules.asar/babel-loader/lib/index.js","mtime":1591671475274},{"path":"/Users/zxk/Applications/WeCodeIDE.app/Contents/Resources/app/extensions/wecode.wecode/resources/sdk/node_modules.asar/cache-loader/dist/cjs.js","mtime":1591671475274},{"path":"/Users/zxk/Applications/WeCodeIDE.app/Contents/Resources/app/extensions/wecode-eslint-config/node_modules/eslint-loader/dist/cjs.js","mtime":1585646722000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3IiOwoKZnVuY3Rpb24gYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBrZXksIGFyZykgeyB0cnkgeyB2YXIgaW5mbyA9IGdlbltrZXldKGFyZyk7IHZhciB2YWx1ZSA9IGluZm8udmFsdWU7IH0gY2F0Y2ggKGVycm9yKSB7IHJlamVjdChlcnJvcik7IHJldHVybjsgfSBpZiAoaW5mby5kb25lKSB7IHJlc29sdmUodmFsdWUpOyB9IGVsc2UgeyBQcm9taXNlLnJlc29sdmUodmFsdWUpLnRoZW4oX25leHQsIF90aHJvdyk7IH0gfQoKZnVuY3Rpb24gX2FzeW5jVG9HZW5lcmF0b3IoZm4pIHsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgdmFyIHNlbGYgPSB0aGlzLCBhcmdzID0gYXJndW1lbnRzOyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyB2YXIgZ2VuID0gZm4uYXBwbHkoc2VsZiwgYXJncyk7IGZ1bmN0aW9uIF9uZXh0KHZhbHVlKSB7IGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgIm5leHQiLCB2YWx1ZSk7IH0gZnVuY3Rpb24gX3Rocm93KGVycikgeyBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJ0aHJvdyIsIGVycik7IH0gX25leHQodW5kZWZpbmVkKTsgfSk7IH07IH0KCmltcG9ydCBxcyBmcm9tICJxcyI7CmltcG9ydCB7IFRvYXN0IH0gZnJvbSAnYW50ZC1tb2JpbGUnOwppbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnOwppbXBvcnQgR2V0U3RvcmFnZSBmcm9tICcuL2dldFN0b3JhZ2UnOwp2YXIgcGF0aG5hbWUgPSAnaHR0cHM6Ly93ZWxpbmsuaWRhb3dlaS5jb20vY29yZS8nOwoKZnVuY3Rpb24gUmVxdWVzdChfeCwgX3gyKSB7CiAgcmV0dXJuIF9SZXF1ZXN0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIF9SZXF1ZXN0KCkgewogIF9SZXF1ZXN0ID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgLyojX19QVVJFX18qLwogIF9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKHVybCwgcGFyYW1zKSB7CiAgICB2YXIgdG9rZW4sIHRva2VuRXhwaXJhdGlvbjsKICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIHRva2VuID0gJyc7CiAgICAgICAgICAgIHRva2VuRXhwaXJhdGlvbiA9IHdpbmRvdy50b2tlbkV4cGlyYXRpb247IC8vIHRva2Vu6L+H5pyf5pe26Ze0MTBtaW4gIDYwMDAwMG1zIAoKICAgICAgICAgICAgaWYgKCEodG9rZW5FeHBpcmF0aW9uICYmIG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gdG9rZW5FeHBpcmF0aW9uID4gNjAwMDAwKSkgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA4OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTsKICAgICAgICAgICAgcmV0dXJuIGdldFRva2VuKCk7CgogICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICB0b2tlbiA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMTsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTA7CiAgICAgICAgICAgIHJldHVybiBHZXRTdG9yYWdlKCd0b2tlbicpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAgICAgICByZXR1cm4gZGF0YTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgdG9rZW4gPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICAgICAgICB2YXIgX3VybCA9IHBhdGhuYW1lICsgdXJsOwoKICAgICAgICAgICAgICB2YXIgX2hlYWRlcnMgPSB7CiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDtjaGFyc2V0PVVURi04JywKICAgICAgICAgICAgICAgICd3ZWxpbmtUb2tlbic6IHRva2VuID8gdG9rZW4gKyAnMjAwJyA6ICcnCiAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgdmFyIF9wYXJhbXMgPSBxcy5zdHJpbmdpZnkoT2JqZWN0LmFzc2lnbih7CiAgICAgICAgICAgICAgICBvczogNCwKICAgICAgICAgICAgICAgIHJhbmQ6IE1hdGgucmFuZG9tKCksCiAgICAgICAgICAgICAgICBtb2R1bGVpZDogMjAwLAogICAgICAgICAgICAgICAgdmVyOiAnMS4wJwogICAgICAgICAgICAgIH0sIHBhcmFtcykpOwoKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhfcGFyYW1zKTsKICAgICAgICAgICAgICBIV0g1LmZldGNoSW50ZXJuZXQoX3VybCwgewogICAgICAgICAgICAgICAgbWV0aG9kOiAncG9zdCcsCiAgICAgICAgICAgICAgICBib2R5OiBfcGFyYW1zLAogICAgICAgICAgICAgICAgaGVhZGVyczogX2hlYWRlcnMKICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgd2luZG93LnRva2VuRXhwaXJhdGlvbiA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwoKICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPj0gMjAwICYmIHJlc3BvbnNlLnN0YXR1cyA8IDMwMCkgewogICAgICAgICAgICAgICAgICByZXNwb25zZS5qc29uKCkudGhlbihmdW5jdGlvbiAocmVwbHkpIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXBseSk7CgogICAgICAgICAgICAgICAgICAgIHN3aXRjaCAocmVwbHkucmVzdWx0KSB7CiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDk5ODoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOTk3OgogICAgICAgICAgICAgICAgICAgICAgY2FzZSA5OTk6CiAgICAgICAgICAgICAgICAgICAgICAgIFRvYXN0LmZhaWwocmVwbHkubWVzc2FnZSwgMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdCh7fSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKCiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgIFRvYXN0LmZhaWwocmVwbHkubWVzc2FnZSwgMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdCh7fSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKCiAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlcGx5KTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBUb2FzdC5mYWlsKFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIG51bGwsIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIG51bGwsIHJlc3BvbnNlLnN0YXR1cyksIFJlYWN0LmNyZWF0ZUVsZW1lbnQoImRpdiIsIG51bGwsIGNvZGVNZXNzYWdlW3Jlc3BvbnNlLnN0YXR1c10pKSwgMSk7CiAgICAgICAgICAgICAgICAgIHZhciBlcnJvciA9IG5ldyBFcnJvcihyZXNwb25zZS5zdGF0dXNUZXh0KTsKICAgICAgICAgICAgICAgICAgZXJyb3IucmVzcG9uc2UgPSByZXNwb25zZTsKICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfor7fmsYLlvILluLgnLCBlcnJvcik7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUpOwogIH0pKTsKICByZXR1cm4gX1JlcXVlc3QuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZXhwb3J0IGRlZmF1bHQgUmVxdWVzdDsKdmFyIGNvZGVNZXNzYWdlID0gewogIDIwMDogJ+acjeWKoeWZqOaIkOWKn+i/lOWbnuivt+axgueahOaVsOaNruOAgicsCiAgMjAxOiAn5paw5bu65oiW5L+u5pS55pWw5o2u5oiQ5Yqf44CCJywKICAyMDI6ICfkuIDkuKror7fmsYLlt7Lnu4/ov5vlhaXlkI7lj7DmjpLpmJ/vvIjlvILmraXku7vliqHvvInjgIInLAogIDIwNDogJ+WIoOmZpOaVsOaNruaIkOWKn+OAgicsCiAgNDAwOiAn5Y+R5Ye655qE6K+35rGC5pyJ6ZSZ6K+v77yM5pyN5Yqh5Zmo5rKh5pyJ6L+b6KGM5paw5bu65oiW5L+u5pS55pWw5o2u55qE5pON5L2c44CCJywKICA0MDE6ICfnlKjmiLfmsqHmnInmnYPpmZDvvIjku6TniYzjgIHnlKjmiLflkI3jgIHlr4bnoIHplJnor6/vvInjgIInLAogIDQwMzogJ+eUqOaIt+W+l+WIsOaOiOadg++8jOS9huaYr+iuv+mXruaYr+iiq+emgeatoueahOOAgicsCiAgNDA0OiAn5Y+R5Ye655qE6K+35rGC6ZKI5a+555qE5piv5LiN5a2Y5Zyo55qE6K6w5b2V77yM5pyN5Yqh5Zmo5rKh5pyJ6L+b6KGM5pON5L2c44CCJywKICA0MDY6ICfor7fmsYLnmoTmoLzlvI/kuI3lj6/lvpfjgIInLAogIDQxMDogJ+ivt+axgueahOi1hOa6kOiiq+awuOS5heWIoOmZpO+8jOS4lOS4jeS8muWGjeW+l+WIsOeahOOAgicsCiAgNDIyOiAn5b2T5Yib5bu65LiA5Liq5a+56LGh5pe277yM5Y+R55Sf5LiA5Liq6aqM6K+B6ZSZ6K+v44CCJywKICA1MDA6ICfmnI3liqHlmajlj5HnlJ/plJnor6/vvIzor7fmo4Dmn6XmnI3liqHlmajjgIInLAogIDUwMjogJ+e9keWFs+mUmeivr+OAgicsCiAgNTAzOiAn5pyN5Yqh5LiN5Y+v55So77yM5pyN5Yqh5Zmo5pqC5pe26L+H6L295oiW57u05oqk44CCJywKICA1MDQ6ICfnvZHlhbPotoXml7bjgIInCn07CgpmdW5jdGlvbiBnZXRUb2tlbigpIHsKICByZXR1cm4gX2dldFRva2VuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIF9nZXRUb2tlbigpIHsKICBfZ2V0VG9rZW4gPSBfYXN5bmNUb0dlbmVyYXRvcigKICAvKiNfX1BVUkVfXyovCiAgX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIEhXSDUucmVtb3ZlU3RvcmFnZSh7CiAgICAgICAgICAgICAga2V5OiAndG9rZW5FeHBpcmF0aW9uJywKICAgICAgICAgICAgICBpc29sYXRpb246IDEKICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd0b2tlbkV4cGlyYXRpb27liKDpmaTmiJDlip8nKTsKICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+WIoOmZpOe8k+WtmOWksei0pScsIGVycm9yKTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAvLyDliKDpmaR0b2VubgogICAgICAgICAgICAvLyBhd2FpdCBIV0g1LnJlbW92ZVN0b3JhZ2UoewogICAgICAgICAgICAvLyAgICAga2V5OiAndG9rZW4nLAogICAgICAgICAgICAvLyAgICAgaXNvbGF0aW9uOiAxCiAgICAgICAgICAgIC8vIH0pLnRoZW4oZGF0YSA9PiB7CiAgICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZygndG9rZW7liKDpmaTmiJDlip8nKTsKICAgICAgICAgICAgLy8gfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgICAgICAvLyAgICAgY29uc29sZS5sb2coJ+WIoOmZpOe8k+WtmOWksei0pScsIGVycm9yKTsKICAgICAgICAgICAgLy8gfSk7CiAgICAgICAgICAgIC8vIOS4iumdouWNjuS4uueahHJlbW92ZVN0b3JhZ2XmsqHnlKjvvIznlKjkuobkuIDkuKrlj5jph48KICAgICAgICAgICAgd2luZG93LnRva2VuRXhwaXJhdGlvbiA9ICcnOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgICAgICAgIC8vIOiOt+WPlnRva2VuCiAgICAgICAgICAgICAgSFdINS5nZXRBdXRoQ29kZSgpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAgICAgICAgIFJlcXVlc3QoJ3dlbGluay5kbz9nZXRUb2tlbicsIHsKICAgICAgICAgICAgICAgICAgY29kZTogZGF0YS5jb2RlCiAgICAgICAgICAgICAgICB9KS50aGVuKAogICAgICAgICAgICAgICAgLyojX19QVVJFX18qLwogICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKAogICAgICAgICAgICAgICAgICAvKiNfX1BVUkVfXyovCiAgICAgICAgICAgICAgICAgIF9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMihyZXMpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy50b2tlbkV4cGlyYXRpb24gPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsgLy8g57yT5a2YdG9rZW4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBIV0g1LnNldFN0b3JhZ2UoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk6ICd0b2tlbicsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHJlcy5kYXRhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc29sYXRpb246IDEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn6K6+572u57yT5a2Y5byC5bi4JywgZXJyb3IpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7IC8vIOe8k+WtmCB0b2tlbui/h+acn+aXtumXtAogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXdhaXQgSFdINS5zZXRTdG9yYWdlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICBrZXk6ICd0b2tlbkV4cGlyYXRpb24nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIGRhdGE6IG5ldyBEYXRlKCkuZ2V0VGltZSgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIGlzb2xhdGlvbjogMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKCforr7nva7nvJPlrZjlvILluLgnLCBlcnJvcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB9KQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzLmRhdGEpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94MykgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9KCkpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KSk7CgogICAgICAgICAgY2FzZSA0OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlMyk7CiAgfSkpOwogIHJldHVybiBfZ2V0VG9rZW4uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQ=="},{"version":3,"sources":["/Users/zxk/Desktop/22/src/utils/request.js"],"names":["qs","Toast","React","GetStorage","pathname","Request","url","params","token","tokenExpiration","window","Date","getTime","getToken","then","data","Promise","resolve","reject","_url","_headers","_params","stringify","Object","assign","os","rand","Math","random","moduleid","ver","console","log","HWH5","fetchInternet","method","body","headers","response","status","json","reply","result","fail","message","codeMessage","error","Error","statusText","catch","removeStorage","key","isolation","getAuthCode","code","res","setStorage"],"mappings":"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","sourcesContent":["\r\n\r\n\r\nimport qs from \"qs\";\r\nimport { Toast } from 'antd-mobile';\r\nimport React from 'react';\r\nimport GetStorage from './getStorage';\r\n\r\n\r\nlet pathname = 'https://welink.idaowei.com/core/';\r\nasync function Request(url, params){\r\n    let token = '';\r\n    let tokenExpiration = window.tokenExpiration;\r\n    // token过期时间10min  600000ms \r\n    if (tokenExpiration&&((new Date().getTime() - tokenExpiration) > 600000) ){// 缓存过期 重新请求token\r\n        // 重新获取token\r\n        token = await getToken();\r\n    }else{\r\n        token = await GetStorage('token').then(data => {\r\n            return data;\r\n        })\r\n    }\r\n    return new Promise((resolve, reject) => {\r\n        const _url = pathname+url\r\n        const _headers = {\r\n            'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8',\r\n            'welinkToken':token ? token + '200' : ''\r\n        };\r\n        const _params = qs.stringify(Object.assign(\r\n            {\r\n                os: 4,\r\n                rand: Math.random(),\r\n                moduleid: 200,\r\n                ver: '1.0'\r\n            }, params))\r\n            console.log(_params);\r\n        HWH5.fetchInternet(_url, {\r\n            method: 'post',\r\n            body: _params,\r\n            headers: _headers\r\n        }).then(response => {\r\n            window.tokenExpiration = new Date().getTime();\r\n            if (response.status >= 200 && response.status < 300) {\r\n                response.json().then(reply => {\r\n                    console.log(reply)\r\n                    switch (reply.result) {\r\n                        case 998:\r\n                        case 997:\r\n                        case 999:\r\n                            Toast.fail(reply.message, 1);\r\n                            reject({});\r\n                            return\r\n                        case 0:\r\n                            Toast.fail(reply.message, 1);\r\n                            reject({});\r\n                            return \r\n                        default:\r\n                            resolve(reply);\r\n                            return \r\n                    }\r\n                });\r\n                \r\n            }else{\r\n                Toast.fail(<div>\r\n                    <div>{response.status}</div>\r\n                    <div>{codeMessage[response.status]}</div>\r\n                </div>, 1);\r\n                const error = new Error(response.statusText);\r\n                error.response = response;\r\n                reject(error)\r\n            }\r\n            \r\n        }).catch(error => {\r\n            console.log('请求异常', error);\r\n        });\r\n    })\r\n\r\n}\r\n\r\nexport default Request;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst codeMessage = {\r\n    200: '服务器成功返回请求的数据。',\r\n    201: '新建或修改数据成功。',\r\n    202: '一个请求已经进入后台排队（异步任务）。',\r\n    204: '删除数据成功。',\r\n    400: '发出的请求有错误，服务器没有进行新建或修改数据的操作。',\r\n    401: '用户没有权限（令牌、用户名、密码错误）。',\r\n    403: '用户得到授权，但是访问是被禁止的。',\r\n    404: '发出的请求针对的是不存在的记录，服务器没有进行操作。',\r\n    406: '请求的格式不可得。',\r\n    410: '请求的资源被永久删除，且不会再得到的。',\r\n    422: '当创建一个对象时，发生一个验证错误。',\r\n    500: '服务器发生错误，请检查服务器。',\r\n    502: '网关错误。',\r\n    503: '服务不可用，服务器暂时过载或维护。',\r\n    504: '网关超时。',\r\n};\r\n\r\n\r\n\r\nasync function getToken(){\r\n    // 删除tokenExpiration过期时间\r\n    await HWH5.removeStorage({\r\n        key: 'tokenExpiration',\r\n        isolation: 1\r\n    }).then(data => {\r\n        console.log('tokenExpiration删除成功');\r\n    }).catch(error => {\r\n        console.log('删除缓存失败', error);\r\n    });\r\n\r\n    // 删除toenn\r\n    // await HWH5.removeStorage({\r\n    //     key: 'token',\r\n    //     isolation: 1\r\n    // }).then(data => {\r\n    //     console.log('token删除成功');\r\n    // }).catch(error => {\r\n    //     console.log('删除缓存失败', error);\r\n    // });\r\n    // 上面华为的removeStorage没用，用了一个变量\r\n    window.tokenExpiration = '';\r\n    return new Promise((resolve, reject)=>{\r\n        // 获取token\r\n        HWH5.getAuthCode().then(data => {\r\n            Request('welink.do?getToken', {\r\n                code: data.code\r\n            }).then(async (res) => {\r\n                window.tokenExpiration = new Date().getTime();\r\n                // 缓存token\r\n                HWH5.setStorage({\r\n                    key: 'token',\r\n                    data: res.data,\r\n                    isolation: 1\r\n                }).catch(error => {\r\n                    console.log('设置缓存异常', error);\r\n                })\r\n                // 缓存 token过期时间\r\n                // await HWH5.setStorage({\r\n                //     key: 'tokenExpiration',\r\n                //     data: new Date().getTime(),\r\n                //     isolation: 1\r\n                // }).catch(error => {\r\n                //     console.log('设置缓存异常', error);\r\n                // })\r\n                resolve(res.data)\r\n            })\r\n        })\r\n    })\r\n}"]}]}